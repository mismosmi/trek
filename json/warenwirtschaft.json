{
    "name": "warenwirtschaft",
    "title": "Warenwirtschaft",
    "tables": {
        "product": {
            "title": "Produkte",
            "columns": [
                {
                    "name": "id",
                    "title": "Produkt ID",
                    "class": 0
                },
                {
                    "name": "category",
                    "title": "Kategorie",
                    "class": 1,
                    "type": "VARCHAR(30)"
                },
                {
                    "name": "name",
                    "title": "Produktname",
                    "class": 1,
                    "type": "VARCHAR(30)",
                    "required": true
                },
                {
                    "name": "unitprice",
                    "title": "Preis/Einheit",
                    "class": 1,
                    "type": "EURO",
                    "required": true
                },
                {
                    "name": "unit",
                    "title": "Teile/Einheit",
                    "class": 1,
                    "type": "INTEGER",
                    "default": 1
                },
                {
                    "name": "pieceprice",
                    "title": "Preis/Teil",
                    "class": 2,
                    "type": "EURO",
                    "js": "tv.unitprice * tv.unit"
                },
                {
                    "name": "notes",
                    "title": "Notizen",
                    "class": 1,
                    "type": "VARCHAR(30)"
                }
            ]
        },
        "project": {
            "title": "Projekte",
            "columns": [
                {
                    "name": "id",
                    "title": "Projekt ID",
                    "class": 0
                },
                {
                    "name": "category",
                    "title": "Kategorie",
                    "class": 1,
                    "type": "VARCHAR(30)"
                },
                {
                    "name": "zone",
                    "title": "Zone",
                    "class": 1,
                    "type": "VARCHAR(30)"
                },
                {
                    "name": "what",
                    "title": "Projektdefinition",
                    "class": 1,
                    "type": "VARCHAR(30)"
                },
                {
                    "name": "department",
                    "title": "Department/Team",
                    "class": 1,
                    "type": "VARCHAR(30)"
                },
                {
                    "name": "responsibility",
                    "title": "Verantwortliche Person",
                    "class": 1,
                    "type": "VARCHAR(30)"
                },
                {
                    "name": "budgetsum",
                    "title": "Summe",
                    "class": 1,
                    "type": "EURO"
                },
                {
                    "name": "spending",
                    "title": "Budget Ausgegeben",
                    "class": 2,
                    "type": "EURO",
                    "js": "let sum = 0; for (var i=0; i<tv.outgoing_quantity.length; i++) sum += tv.outgoing_quantity[i] * tv.outgoing_product_unitprice[i]; for (var i=0; i<tv.retoure_quantity.length; i++) sum -= tv.retoure_quantity[i] * tv.retoure_product_unitprice[i]; return sum;",
                    "tables": ["outgoing","retoure"]
                },
                {
                    "name": "budgetleft",
                    "title": "Budget Ãœbrig",
                    "class": 2,
                    "type": "EURO",
                    "js": "tv.budgetsum - tv.spending"
                },
                {
                    "name": "notes",
                    "title": "Notizen",
                    "class": 1,
                    "type": "VARCHAR(30)"
                }
            ]
        },
        "incoming": {
            "title": "Wareneingang",
            "columns": [
                {
                    "table": "project",
                    "title": "Projekt ID",
                    "class": 3
                },
                {
                    "table": "product",
                    "title": "Produkt ID",
                    "class": 3
                },
                {
                    "name": "modifieddate",
                    "title": "Zuletzt bearbeitet",
                    "class": 0
                },
                {
                    "name": "productcategory",
                    "title": "Produktkategorie",
                    "class": 2,
                    "js": "tv.product_category"
                },
                {
                    "name": "productname",
                    "title": "Produktname",
                    "class": 2,
                    "js": "tv.product_name"
                },
                {
                    "name": "unitprice",
                    "title": "Preis/Einheit",
                    "class": 2,
                    "type": "EURO",
                    "js": "tv.product_unitprice"
                },
                {
                    "name": "quantity",
                    "title": "Anzahl Einheiten",
                    "class": 1,
                    "type": "INTEGER"
                },
                {
                    "name": "sum",
                    "title": "Summe Bestellung",
                    "class": 2,
                    "type": "EURO",
                    "js": "tv.quantity * tv.product_unitprice"
                }
            ]
        },
        "outgoing": {
            "title": "Warenausgang",
            "column_reference": "incoming"
        },
        "retoure": {
            "title": "Retouren",
            "column_reference": "incoming"
        }
    },
    "order": [
        "product",
        "project",
        "incoming",
        "outgoing",
        "retoure"
    ]
}
